--- origsrc/Python-3.0rc3/Lib/ctypes/util.py	2008-05-23 12:26:46.000000000 -0500
+++ src/Python-3.0rc3/Lib/ctypes/util.py	2008-11-25 19:34:30.784736200 -0600
@@ -81,6 +81,26 @@
                 continue
         return None
 
+elif sys.platform == "cygwin":
+    import re
+    def find_library(name):
+        for libdir in ['/usr/lib', '/usr/local/lib']:
+            for libext in ['lib%s.dll.a' % name, 'lib%s.a' % name]:
+                implib = os.path.join(libdir, libext)
+                if not os.path.exists(implib):
+                    continue
+                cmd = "strings 2>/dev/null " + implib
+                f = os.popen(cmd)
+                try:
+                    data = f.read()
+                finally:
+                    f.close()
+                res = re.search(r'\s+(cyg.*\.dll+)\s', data)
+                if not res:
+                    continue
+                return res.group(1)
+        return None
+
 elif os.name == "posix":
     # Andreas Degert's find functions, using gcc, /sbin/ldconfig, objdump
     import re, tempfile, errno
@@ -222,6 +243,10 @@
             print(cdll.LoadLibrary("libcrypto.dylib"))
             print(cdll.LoadLibrary("libSystem.dylib"))
             print(cdll.LoadLibrary("System.framework/System"))
+        elif sys.platform == "cygwin":
+            print(cdll.LoadLibrary("cygbz2-1.dll"))
+            print(find_library("crypt"))
+            print(cdll.LoadLibrary("cygcrypt-0.dll"))
         else:
             print(cdll.LoadLibrary("libm.so"))
             print(cdll.LoadLibrary("libcrypt.so"))
